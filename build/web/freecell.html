<!DOCTYPE html><html><head><title>FreeCell</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">











</head><body><script src="packages/web_components/platform.js"></script><script src="packages/web_components/dart_support.js"></script>










<!-- unminfied for debugging:
<link rel="import" href="src/js/polymer/layout.html">
<script src="src/js/polymer/polymer.concat.js"></script>
-->



<style shim-shadowdom="">
/*******************************
          Flex Layout
*******************************/

html /deep/ [layout][horizontal], html /deep/ [layout][vertical] {
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

html /deep/ [layout][horizontal][inline], html /deep/ [layout][vertical][inline] {
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
}

html /deep/ [layout][horizontal] {
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
}

html /deep/ [layout][horizontal][reverse] {
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
}

html /deep/ [layout][vertical] {
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
}

html /deep/ [layout][vertical][reverse] {
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
}

html /deep/ [layout][wrap] {
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
}

html /deep/ [layout][wrap-reverse] {
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
}

html /deep/ [flex] {
  -ms-flex: 1;
  -webkit-flex: 1;
  flex: 1;
}

html /deep/ [flex][auto] {
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
}

html /deep/ [flex][none] {
  -ms-flex: none;
  -webkit-flex: none;
  flex: none;
}

html /deep/ [flex][one] {
  -ms-flex: 1;
  -webkit-flex: 1;
  flex: 1;
}

html /deep/ [flex][two] {
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
}

html /deep/ [flex][three] {
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
}

html /deep/ [flex][four] {
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
}

html /deep/ [flex][five] {
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
}

html /deep/ [flex][six] {
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
}

html /deep/ [flex][seven] {
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
}

html /deep/ [flex][eight] {
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
}

html /deep/ [flex][nine] {
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
}

html /deep/ [flex][ten] {
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
}

html /deep/ [flex][eleven] {
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
}

html /deep/ [flex][twelve] {
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
}

/* alignment in cross axis */

html /deep/ [layout][start] {
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

html /deep/ [layout][center] {
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

html /deep/ [layout][end] {
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
}

/* alignment in main axis */

html /deep/ [layout][start-justified] {
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
}

html /deep/ [layout][center-justified] {
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}

html /deep/ [layout][end-justified] {
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}

html /deep/ [layout][around-justified] {
  -ms-flex-pack: around;
  -webkit-justify-content: space-around;
  justify-content: space-around;
}

html /deep/ [layout][justified] {
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}

/* self alignment */

html /deep/ [self-start] {
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
}

html /deep/ [self-center] {
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
}

html /deep/ [self-end] {
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
}

html /deep/ [self-stretch] {
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
}

/*******************************
          Other Layout
*******************************/

html /deep/ [block] {
  display: block;
}

/* ie support for hidden */
html /deep/ [hidden] {
  display: none !important;
}

html /deep/ [relative] {
  position: relative;
}

html /deep/ [fit] {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

body[fullbleed] {
  margin: 0;
  height: 100vh;
}

/*******************************
            Other
*******************************/

html /deep/ [segment], html /deep/ segment {
  display: block;
  position: relative;
  -webkit-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  margin: 1em 0.5em;
  padding: 1em;
  background-color: white;
  -webkit-box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.1);
  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.1);
  border-radius: 5px 5px 5px 5px;
}

</style><script src="packages/polymer/src/js/polymer/polymer.js"></script><script>
// TODO(sigmund): remove this script tag (dartbug.com/19650). This empty
// script tag is necessary to work around a bug in Chrome 36.
</script>





<script>
var Module = {
  TOTAL_MEMORY: 33554432,
};
</script><script src="solver/libfreecell-solver.min.js"></script><script src="solver/freecell-solver.js"></script><polymer-element name="freecell-solver" attributes="board solution">
  <script>
    Polymer({
      board: null,
      solution: null,

      boardChanged: function() {
        if (!this.board) {
          this.solution = null;
          return;
        }

        freecell.solve(this.board).then(function(solution) {
          this.solution = solution;
          // TODO(abarth): Interoperability between JavaScript and Dart
          // Polymer elements is broken. The Dart components can't listen
          // for changes in JavaScript components. To work around this bug
          // we need to fire and event to notify Dart components.
          // https://code.google.com/p/dart/issues/detail?id=19979
          this.fire('freecell-solved', this.solution);
        }.bind(this), function(error) {
          this.solution = null;
          console.log('stack' in error ? error.stack : error);
        }.bind(this));
      },
    });
  </script>
</polymer-element>







<polymer-element name="fc-drag-drop">
  
</polymer-element>
<polymer-element name="fc-card">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }
      :host(.moving) {
        will-change: transform;
        pointer-events: none;
        z-index: 1;
      }
      :host(.fly-away) {
        position: fixed;
        top: 0;
        left: 0;
      }
      :host(.glow) {
        box-shadow: 0 0 12px 3px #FFFFCC;
        background-color: #FFFFCC;
        border-radius: 6px;
      }
      img {
        display: block;
      }
    </style>
    <fc-drag-drop></fc-drag-drop>
    <template if="{{ card }}">
      <img width="100%" on-load="{{ handleLoad }}" src="{{ card | formatUrl }}" draggable="false">
    </template>
  </template>
  
</polymer-element>





<polymer-element name="fc-pile">
  
</polymer-element>
<polymer-element name="fc-collapsed-pile" extends="fc-pile">
  <template>
    <style>
      :host {
        display: block;
        background-color: darkgreen;
        box-shadow: inset 0 0 5px lightgreen;
        border-radius: 6px;
        position: relative;
      }

      img {
        display: block;
        width: 100%;
      }

      .above {
        /* FIXME: Need to override the deep selector for animations here. */
        position: absolute !important;
        top: 0;
      }
    </style>
    <template if="{{ !pile.cards.isEmpty }}">
      <template if="{{ pile.cards.length >= 2 }}">
        <fc-card card="{{ pile.cards[pile.cards.length - 2] }}"></fc-card>
      </template>
      <fc-card class="above" card="{{ pile.cards[pile.cards.length - 1] }}"></fc-card>
    </template>
    <template if="{{ pile.cards.isEmpty }}">
      <img src="svg-cards/none.svg">
    </template>
  </template>
  
</polymer-element>





<polymer-element name="fc-column" extends="fc-pile">
  <template>
    <style>
      :host {
        display: block;
      }

      fc-card {
        margin-top: -110%;
      }

      .card-0 {
        margin-top: 0;
      }
    </style>
    <template repeat="{{ item in pile.cards | enumerate }}">
      <fc-card card="{{ item.value }}" class="card-{{ item.index }}"></fc-card>
    </template>
    <template if="{{ pile.cards.isEmpty }}">
      <img width="100%" src="svg-cards/none.svg">
    </template>
  </template>
  
</polymer-element>
<polymer-element name="fc-app" on-place-card="{{ handlePlaceCard }}" on-pile-changed="{{ handlePileChanged }}" on-card-movement-end="{{ handleCardMovementEnd }}">
  <template>
    <style>
      :host {
        display: block;
      }

      .columns, .piles {
        display: flex;
        padding: 3%;
        box-sizing: border-box;
      }

      fc-collapsed-pile {
        flex: 1;
        flex-shrink: 0;
      }

      fc-collapsed-pile:nth-child(2),
      fc-collapsed-pile:nth-child(3),
      fc-collapsed-pile:nth-child(4),
      fc-collapsed-pile:nth-child(7),
      fc-collapsed-pile:nth-child(8),
      fc-collapsed-pile:nth-child(9) {
        margin-right: 0.2%;
      }

      fc-collapsed-pile:nth-child(5) {
        margin-right: 5.8%;
      }

      fc-column {
        flex: 1;
        flex-shrink: 0;
        flex-direction: column;
        margin-right: 1%;
      }

      fc-column:last-child {
        margin-right: 0;
      }

      :host(.loading) /deep/ fc-card {
        visibility: hidden;
      }

      :host(.animating) /deep/ fc-card {
        position: relative;
        will-change: transform;
      }

      #toolbar {
        display: flex;
        padding: 2px 8px;
        background: #EDE8E8;
        color: #1D1E19;
        font-size: 12px;
        border-bottom: 1px solid #565656;
        box-shadow: 0 3px 10px #444;
      }

      #title {
        flex: 1;
        display: flex;
        align-items: center;
      }

      #status {
        display: flex;
        align-items: center;
      }

      #title input {
        padding: 4px;
        border: 1px solid #565656;
        font-family: "Open Sans", sans-serif;
        font-size: 1em;
      }

      #title button {
        padding: 4px;
        border: 1px solid #565656;
        background: #C5C5C5 -webkit-linear-gradient(rgba(233, 233, 233, 1.0), rgba(178, 178, 178, 1.0));
        margin-left: 4px;
        align-self: stretch;
      }

      #win {
        font-size: 4em;
        color: #E0D662;
        font-weight: bold;
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        pointer-events: none;
        z-index: 100;
        opacity: 0.8;
      }
    </style>
    <div id="toolbar">
      <div id="title">
        FreeCell Game #<input value="{{ boardId }}">
        <button on-tap="{{ deal }}">Deal</button>
        <button id="solve" on-tap="{{ solve }}">Solve</button>
        <button on-tap="{{ newBoard }}">New</button>
      </div>
      <div id="status">
        Cards Left: {{ remainingCards }}
      </div>
    </div>
    <div id="win" hidden="">
      You won!
    </div>
    <div class="piles">
      <template repeat="{{ cell in tableau.cells }}">
        <fc-collapsed-pile pile="{{ cell }}"></fc-collapsed-pile>
      </template>
      <template repeat="{{ tower in tableau.towers }}">
        <fc-collapsed-pile pile="{{ tower }}"></fc-collapsed-pile>
      </template>
    </div>
    <div class="columns">
      <template repeat="{{ column in tableau.columns }}">
        <fc-column pile="{{ column }}"></fc-column>
      </template>
    </div>
    <freecell-solver board="{{ boardForSolver }}" on-freecell-solved="{{ handleFreecellSolved }}"></freecell-solver>
  </template>
  
</polymer-element>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: #085700;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    font-family: "Open Sans", sans-serif;
  }

  body {
    overflow-y: scroll;
  }

  fc-app {
    height: 100%;
  }
</style><fc-app></fc-app>
<script type="application/dart" src="freecell.html_bootstrap.dart"></script><script src="packages/browser/dart.js"></script></body></html>